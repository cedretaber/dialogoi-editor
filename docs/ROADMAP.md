# Dialogoi Editor ロードマップ

## 開発フェーズ

### 🚀 Phase 1: MVP (Minimum Viable Product) ✅ **完了**
**目標**: 基本的なファイル管理機能を持つExtensionの実装

**実装完了**:
- [x] VSCode Extension の基本構造とTreeView実装
- [x] `meta.yaml` の読み書き機能
- [x] ファイルの作成・削除・並び替え・名前変更
- [x] ディレクトリクリックでREADME.md表示
- [x] 自動拡張子付与とアイコン表示
- [x] 包括的なテストスイート

### 📝 Phase 2: メタデータ管理強化 ✅ **完了**
**目標**: 小説執筆に必要なメタデータ管理機能の充実

**実装完了**:
- [x] タグシステム（ファイル・ディレクトリへのタグ付与、TreeView表示）
- [x] 参照関係管理（双方向管理、ツールチップ表示、存在チェック）
- [x] ファイルハッシュによる変更検知システム
- [x] レビュー機能（追加・編集・削除、ステータス管理、スレッド機能）
- [x] キャラクター設定・用語集・伏線管理機能
- [x] `dialogoi.yaml` の仕様策定と実装
- [x] 小説プロジェクト新規作成機能（既存ディレクトリスキャン、自動判定）

### 🔧 Phase 2.5: アーキテクチャリファクタリング ✅ **完了**
**目標**: Repository/Service層の設計問題を解決し、適切な責務分離を実装

**実装完了**:
- [x] MetaYamlService・FileOperationService の新規実装（依存関係注入パターン）
- [x] Repository から高レベルメソッドを削除、純粋なデータアクセス層に特化
- [x] Service層でのビジネスロジック処理に集約
- [x] 循環依存の解消とテスト可能性の向上

### 🛠️ Phase 2.8: コードベースリファクタリング ✅ **完了**
**目標**: Phase 3 進出前の大規模リファクタリングでコード品質を最大化

**実装完了**:
- [x] ESLint設定修正とany型の完全排除（120個のエラー→0個）
- [x] extension.tsの分割（446行→71行、84%削減）
- [x] Logger クラス実装による統一されたエラーハンドリング
- [x] 未使用コード削除とコードクリーンアップ
- [x] 命名規則の統一と不要コメントの削除

**成果**:
- ✅ TypeScript 型安全性の完全確保
- ✅ 保守性の高いモジュール構成（/commands構造）
- ✅ 一貫したエラーハンドリング
- ✅ 182個のテストが全て成功

### 🎨 Phase 3: UI/UX改善 🔄 **進行中**
**目標**: より使いやすいインターフェースの提供

#### Phase 3.1: WebView詳細画面 ✅ **完了**
- [x] 設計仕様策定（アコーディオンパネル形式、サイドパネル配置）
- [x] 技術アーキテクチャ設計（WebViewView、メッセージング）
- [x] 基本WebView実装（package.json、ViewProvider、extension.ts統合）
- [x] VSCodeエクスプローラー風セクションUI実装（HTML/CSS、JavaScript制御）
- [x] 表示内容実装（タグ、参照関係、キャラクター情報、レビュー、基本情報）
- [x] TreeViewとWebViewの統合（Activity Bar配置、リアルタイム連携）
- [x] 統合UI実装（1つのViewContainerでファイル選択と詳細表示）

**実装成果**:
- ✅ Activity BarにDialogoi ViewContainerを追加
- ✅ TreeView（ファイルツリー）とWebView（ファイル詳細）の統合
- ✅ VSCodeエクスプローラー風の折りたたみ可能セクション
- ✅ TreeView選択時のリアルタイム詳細表示更新
- ✅ ワークフロー改善（エクスプローラー⇔詳細パネルの行き来が不要）

#### Phase 3.2: その他UI改善 **未着手**
- [ ] ドラッグ&ドロップでの並び替え改善
- [ ] 検索・フィルタリング機能
- [ ] ハイパーリンク機能
- [ ] コンテキストメニューの充実
- [ ] キーボードショートカットの実装
- [ ] 多言語対応（日本語優先）

### 🔍 Phase 4: 高度な分析機能
**目標**: 執筆支援のための分析・可視化機能

- [ ] 伏線の可視化（タイムライン表示）
- [ ] キャラクター相関図
- [ ] 話数ごとの登場人物追跡
- [ ] 参照関係のグラフ表示
- [ ] 執筆統計（文字数、更新頻度等）

## 将来的な機能拡張

### 📖 執筆支援機能

1. **プレビュー機能**
   - 青空文庫形式の解釈
   - 縦書き表示対応
   - リアルタイムプレビュー

2. **PDF出力機能**
   - 印刷用レイアウト
   - 電子書籍形式への変換
   - カスタムスタイルシート対応

3. **タイムライン機能**
   - 作品内時系列の可視化
   - 矛盾検出機能
   - 読者視点での伏線タイムライン

4. **バージョン管理連携**
   - Git統合の強化
   - 変更履歴の可視化
   - 共同執筆サポート

### 🤖 AI連携機能

1. **Dialogoi MCP サーバ連携**
   - キャラクター設定に基づく対話生成
   - 設定の一貫性チェック
   - プロット提案機能

2. **執筆アシスタント**
   - 文章校正機能
   - 類語・表現提案
   - スタイル統一チェック

### 📊 分析・管理機能

1. **プロジェクト管理**
   - 執筆スケジュール管理
   - 進捗トラッキング
   - 目標設定機能

2. **テンプレート機能**
   - プロジェクトテンプレート
   - キャラクターシートテンプレート
   - ジャンル別構成テンプレート

3. **エクスポート/インポート**
   - 他の執筆ツールとの連携
   - バックアップ機能
   - クラウド同期

### 🤝 コラボレーション機能

1. **レビュー管理システム** *(Phase 2b で基本機能実装済み)*
   - [x] 編集者からのフィードバック管理
   - [x] レビューの位置追跡とハッシュによる変更検知
   - [x] スレッド形式での議論機能
   - [x] ステータス管理（open/in_progress/resolved/dismissed）
   - [ ] AIレビューの統合（Dialogoi MCP連携）

2. **共同執筆サポート**
   - 複数人での同時編集対応
   - 変更履歴の可視化
   - コンフリクト解決支援

## 技術的改善

### パフォーマンス最適化
- 大規模プロジェクト対応（1000話以上）
- インクリメンタル更新
- 遅延読み込み

### 品質向上
- 自動テストの充実
- エラーハンドリング改善
- ユーザビリティテスト

### 拡張性
- プラグインシステム
- カスタムメタデータ対応
- API公開

## コミュニティ機能（長期構想）

- 作品共有プラットフォーム
- 執筆テクニック共有
- ユーザーフォーラム
- 公式テンプレート配布

---

**注**: このロードマップは現時点での構想であり、ユーザーフィードバックや技術的制約により変更される可能性があります。